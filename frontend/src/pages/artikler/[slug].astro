---
import ArticleDetailContent from '../../components/ArticleDetailContent.astro';
import { createDataService } from '../../lib/sanity/dataService.js';

export async function getStaticPaths() {
  const dataService = createDataService();
  const articles = await dataService.getSlugsForType('article');
  return articles.map((article: any) => ({ params: article.params }));
}

const dataService = createDataService(Astro.request);
const article = await dataService.getArticleBySlug(Astro.params.slug);

if (!article) {
  return Astro.redirect('/404');
}
---

<ArticleDetailContent article={article} language="no" />
